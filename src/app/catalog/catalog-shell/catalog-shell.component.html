@if (error$ | async) {error}

@if(loading$ | async ){
<div style="display: grid; grid-template-columns: 1fr auto; gap: 1ch; align-items: center;">
    <h2>âŒ› Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ÑƒÑ”Ğ¼Ğ¾ ÑĞºĞ¸ÑĞ¾Ğº Ñ‚Ğ°Ğ¹Ñ‚Ğ»Ñ–Ğ² Ğ· ğŸ‡ºğŸ‡¦ Ğ¿ĞµÑ€ĞµĞºĞ»Ğ°Ğ´Ğ¾Ğ¼</h2>
</div>
<section>
    <title-card [cover]="'/no-image.svg'" [title]="'Ğ¢ĞµÑ€Ğ¿Ñ–Ğ½Ğ½Ñ-ÑĞµĞ½ÑĞµĞ¹ Ñ– Ğ¼Ğ¸ÑÑ‚ĞµÑ†Ñ‚Ğ²Ğ¾ Ğ¾Ñ‡Ñ–ĞºÑƒĞ²Ğ°Ğ½Ğ½Ñ'" [status]="'âŒ›'" />
    <title-card [cover]="'/no-image.svg'" [title]="'Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ÑƒÑ”Ñ‚ÑŒÑÑ Ğ´Ğ¾Ğ²ÑˆĞµ, Ğ½Ñ–Ğ¶ Ñ‚Ğ²Ñ–Ğ¹ ÑĞµĞ¹Ğ² Ñƒ Skyrim'" [status]="'âŒ›'" />
    <title-card [cover]="'/no-image.svg'" [title]="'Ğ©Ğ¾Ğ´ĞµĞ½Ğ½Ğ¸Ğº Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ³ĞµÑ€Ğ¾Ñ, Ñ‰Ğ¾ Ğ·Ğ°ÑÑ‚Ñ€ÑĞ³ Ñƒ Ğ»Ğ¾Ğ°Ğ´Ñ–Ğ½Ğ³Ñƒ'" [status]="'âŒ›'" />
    <title-card [cover]="'/no-image.svg'" [title]="'Ğ‘ÑƒÑ„ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ-Ñ‡Ğ°Ğ½: ĞŸÑ€Ğ¸Ğ³Ğ¾Ğ´Ğ¸ Ğ½ĞµĞ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾Ñ— ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸'" [status]="'âŒ›'" />
    <title-card [cover]="'/no-image.svg'" [title]="'ĞĞ°Ñ€ÑƒÑ‚Ğ¾, Ğ°Ğ»Ğµ Ğ¿Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½Ñ–ÑˆĞµ'" [status]="'âŒ›'" />
    <title-card [cover]="'/no-image.svg'" [title]="'Ğ¯ Ğ¿ĞµÑ€ĞµĞ²Ñ‚Ñ–Ğ»Ğ¸Ğ²ÑÑ Ñƒ ÑĞ¿Ñ–Ñ€Ğ°Ğ»ÑŒ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ'" [status]="'âŒ›'" />
</section>
<!-- <loading />  -->
}

@if (list$ | async; as list) {
@if (!(loading$ | async)) {
<div style="display: grid; grid-template-columns: 1fr auto; gap: 1ch; align-items: center;">
    <h2>ğŸ—‚ï¸ Ğ—Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ {{catalog.total()}} Ñ‚Ğ°Ğ¹Ñ‚Ğ»Ñ–Ğ² Ğ· ğŸ‡ºğŸ‡¦ Ğ¿ĞµÑ€ĞµĞºĞ»Ğ°Ğ´Ğ¾Ğ¼</h2>
    <button disabled class="button" title="Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€">ğŸ›ï¸</button>
</div>

<section>
    @for (item of list.data; track $index) {
    <title-card
        [cover]="catalog.proxy.proxyUrl('https://mangadex.org/covers/'+item.id+'/'+MangadexHelper.getCover(item.relationships).attributes?.fileName+'.512.jpg')"
        [title]="MangadexHelper.getTitle(item.attributes)"
        [contentRating]="MangadexHelper.contentRatingMap.get(item.attributes.contentRating)??''"
        [status]="MangadexHelper.statusMap.get(item.attributes.status)??''"
        [nsfw]="MangadexHelper.isNSFW(item?.attributes)" alt="Cover {{MangadexHelper.getTitle(item.attributes)}}"
        [link]="['/', item.id, MangadexHelper.getAlias(item.attributes)]" />
    }

</section>

@if (catalog.pagination(catalog.total(), catalog.page(), catalog.limit(), 1); as pagination) {
@if (pagination.length > 1) {
<nav>
    @for (item of pagination; track $index) {
    <a [ngClass]="{disabled: catalog.page() == item}" class="button " [routerLink]="'/'"
        [queryParams]="mapQueryParamsWithPage(item)">{{item}}</a>
    }
</nav>
}}
}}